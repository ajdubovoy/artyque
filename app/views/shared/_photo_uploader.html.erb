<% show_label = false unless local_assigns.has_key? :show_label %>
<% multiple = false unless local_assigns.has_key? :multiple %>
<% original_photo = '' unless local_assigns.has_key? :original_photo %>

<%= f.label field if show_label %>
<div class="photo-uploader <%= 'photo-uploader-multiple' if multiple %>" data-controller='photo-uploader'>
  <div class="file-input mb-2 <%= "d-none" if multiple && original_photo %>">
    <%= f.input field, label: '+', input_html: { "data-target": "photo-uploader.input", "data-action": 'change->photo-uploader#update', "data-multiple" => multiple } %>
  </div>
  <div class="photo-uploader-embed mb-2">
    <% if original_photo.present? %>
      <%= cl_image_tag original_photo, class: 'w-100', 'data-target' => 'photo-uploader.embed' %>
    <% else %>
      <img class="w-100" data-target='photo-uploader.embed' />
    <% end %>
  </div>
</div>
